<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="view_edi_route_form" model="ir.ui.view">
        <field name="name">view_edi_route_form</field>
        <field name="model">edi.route</field>
        <field name="arch" type="xml">
            <form string="EDI Message Route">
                <header>
                    <button
                        name="read_messages"
                        type="object"
                        string="Read Messages"
                        invisible="direction != 'in'"
                    />
                    <button
                        name="send_messages"
                        type="object"
                        string="Generate/Send Messages"
                        invisible="direction != 'out'"
                    />
                    <button
                        name="action_sync_cron"
                        type="object"
                        string="Sync Scheduled Actions"
                    />
                </header>
                <sheet>
                    <group>
                        <field name="backend_id" />
                        <field
                            name="envelope_route_id"
                            domain="[('backend_id', '=', backend_id)]"
                        />
                        <field name="name" />
                    </group>
                    <group>
                        <field name="direction" />
                    </group>
                    <div
                        class="alert alert-warning"
                        role="alert"
                        invisible="not warn_external_id_updateable"
                    >
                        Editing through this editor is not advised. Upon next app upgrade some changes may be lost.<br
                        />
                        This configuration is defined through XML and is marked as updateable.
                    </div>
                    <notebook>
                        <page name="trigger" string="Trigger">
                            <group>
                                <group>
                                    <field name="action_trigger" />
                                </group>
                                <group
                                    name="trigger_cron"
                                    invisible="action_trigger != 'schedule'"
                                >
                                    <label
                                        for="cron_interval_number"
                                        string="Execute Every"
                                    />
                                    <div>
                                        <field
                                            name="cron_interval_number"
                                            class="oe_inline"
                                        />
                                        <field
                                            name="cron_interval_type"
                                            class="oe_inline"
                                        />
                                    </div>

                                    <field name="cron_id" readonly="1" />
                                </group>
                            </group>
                            <group
                                name="trigger_model"
                                invisible="action_trigger != 'model_event'"
                            >
                            <field
                                    name="model_event_id"
                                    options="{'no_quick_create': True, 'no_create_edit' : True}"
                                />

                            <field name="model" invisible="1" force_save="1" />

                            <field
                                    name="domain"
                                    widget="domain"
                                    options="{'model': 'model', 'in_dialog': True}"
                                />
                        </group>
                    </page>
                    <page name="action" string="Action">
                        <group>
                            <field name="action" />
                        </group>
                        <group name="group_action_code">
                            <field name="show_action_code" invisible="1" />
                            <field
                                    name="action_code"
                                    widget="ace"
                                    options="{'mode': 'python'}"
                                    invisible="not show_action_code"
                                />
                        </group>
                        <group name="group_qweb" invisible="action != 'qweb'">
                            <field
                                    name="qweb_arch"
                                    widget="code"
                                    options="{'mode': 'xml'}"
                                    placeholder="Enter XML here."
                                />
                        </group>
                    </page>
                    <page string="Queue" name="queue_options">
                        <group>
                            <field name="queue_priority" />
                            <field name="queue_identity_exact" />
                            <field name="queue_channel" />
                            <field name="queue_max_retries" />
                            <field name="queue_eta" />
                        </group>
                    </page>
                    <page string="Other Info" name="other_info">
                        <group>
                            <group>
                                <field name="vacuum_content" widget="boolean_toggle" />
                                <field
                                        name="vacuum_content_after_days"
                                        invisible="not vacuum_content"
                                    />
                                <button
                                        name="action_vacuum_content"
                                        type="object"
                                        string="Vacuum"
                                        invisible="not vacuum_content"
                                    />
                            </group>
                            <group>
                                <field name="warn_external_id_updateable" />
                            </group>
                        </group>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
</record>
<record id="view_edi_route_tree" model="ir.ui.view">
    <field name="name">view_edi_route_tree</field>
    <field name="model">edi.route</field>
    <field name="arch" type="xml">
        <tree>
            <field name="name" />
            <field name="backend_id" />
            <field name="envelope_route_id" />
            <field name="direction" />
        </tree>
    </field>
</record>
<record id="view_edi_route_search" model="ir.ui.view">
    <field name="name">view_edi_route_search</field>
    <field name="model">edi.route</field>
    <field name="arch" type="xml">
        <search>
            <field name="name" />
            <field name="backend_id" widget="many2one" />
            <field name="envelope_route_id" widget="many2one" />
            <filter
                    name="archived"
                    domain="[('active', '=', False)]"
                    string="Archived"
                />
            <separator />
            <filter
                    name="direction_in"
                    string="In"
                    domain="[('direction', '=', 'import')]"
                />
            <filter
                    name="direction_out"
                    string="Out"
                    domain="[('direction', '=', 'export')]"
                />
            <group string="Group By">
                <filter
                        string="Backend"
                        name="groupby_backend_id"
                        domain="[]"
                        context="{'group_by':'backend_id'}"
                    />
                <filter
                        string="Direction"
                        name="groupby_direction"
                        domain="[]"
                        context="{'group_by':'direction'}"
                    />
            </group>
        </search>
    </field>
</record>
<record id="action_edi_route" model="ir.actions.act_window">
    <field name="name">EDI Message Routes</field>
    <field name="res_model">edi.route</field>
    <field name="view_mode">tree,form</field>
    <field name="view_id" ref="view_edi_route_tree" />
    <field name="context">{'search_default_groupby_backend_id': 1}</field>
</record>
</odoo>
