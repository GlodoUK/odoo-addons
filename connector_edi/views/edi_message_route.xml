<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="view_edi_route_form" model="ir.ui.view">
        <field name="name">view_edi_route_form</field>
        <field name="model">edi.route</field>
        <field name="arch" type="xml">
            <form string="EDI Message Route">
                <header>
                    <button
                        name="read_messages"
                        type="object"
                        string="Read Messages"
                        attrs="{'invisible': [('direction', '!=', 'in')]}"
                    />
                    <button
                        name="send_messages"
                        type="object"
                        string="Generate/Send Messages"
                        attrs="{'invisible': [('direction', '!=', 'out')]}"
                    />
                    <button
                        name="action_sync_cron"
                        type="object"
                        string="Sync Scheduled Actions"
                    />
                </header>
                <sheet>
                    <group>
                        <field name="backend_id" />
                        <field
                            name="envelope_route_id"
                            domain="[('backend_id', '=', backend_id)]"
                        />
                        <field name="name" />
                    </group>
                    <group>
                        <field name="direction" />

                    </group>
                    <notebook>
                        <page name="trigger" string="Trigger">
                            <group>
                                <group>
                                    <field name="action_trigger" />
                                </group>
                                <group
                                    attrs="{'invisible': [('action_trigger', '!=', 'schedule')]}"
                                    name="trigger_cron"
                                >
                                    <label
                                        for="cron_interval_number"
                                        string="Execute Every"
                                    />
                                    <div>
                                        <field
                                            name="cron_interval_number"
                                            class="oe_inline"
                                        />
                                        <field
                                            name="cron_interval_type"
                                            class="oe_inline"
                                        />
                                    </div>

                                    <field name="cron_id" readonly="1" />
                                </group>
                            </group>
                            <group
                                name="trigger_model"
                                attrs="{'invisible': [('action_trigger', '!=', 'model_event')]}"
                            >
                            <field
                                    name="model_event_id"
                                    options="{'no_quick_create': True, 'no_create_edit' : True}"
                                />

                            <field name="model" invisible="1" force_save="1" />

                            <field
                                    name="domain"
                                    widget="domain"
                                    options="{'model': 'model', 'in_dialog': True}"
                                />
                        </group>
                    </page>
                    <page name="action" string="Action">
                        <group>
                            <field name="action" />
                        </group>
                        <group>
                            <field
                                    name="action_code"
                                    widget="ace"
                                    options="{'mode': 'python'}"
                                    attrs="{'invisible': [('action', '!=', 'code')]}"
                                />
                        </group>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
</record>
<record id="view_edi_route_tree" model="ir.ui.view">
    <field name="name">view_edi_route_tree</field>
    <field name="model">edi.route</field>
    <field name="arch" type="xml">
        <tree>
            <field name="name" />
            <field name="backend_id" />
            <field name="envelope_route_id" />
            <field name="direction" />
        </tree>
    </field>
</record>
<record id="view_edi_route_search" model="ir.ui.view">
    <field name="name">view_edi_route_search</field>
    <field name="model">edi.route</field>
    <field name="arch" type="xml">
        <search>
            <field name="name" />
            <field name="backend_id" widget="many2one" />
            <field name="envelope_route_id" widget="many2one" />
            <filter
                    name="archived"
                    domain="[('active', '=', False)]"
                    string="Archived"
                />
            <separator />
            <filter
                    name="direction_in"
                    string="In"
                    domain="[('direction', '=', 'import')]"
                />
            <filter
                    name="direction_out"
                    string="Out"
                    domain="[('direction', '=', 'export')]"
                />
            <group string="Group By">
                <filter
                        string="Backend"
                        name="groupby_backend_id"
                        domain="[]"
                        context="{'group_by':'backend_id'}"
                    />
                <filter
                        string="Direction"
                        name="groupby_direction"
                        domain="[]"
                        context="{'group_by':'direction'}"
                    />
            </group>
        </search>
    </field>
</record>
<record id="action_edi_route" model="ir.actions.act_window">
    <field name="name">EDI Message Routes</field>
    <field name="res_model">edi.route</field>
    <field name="view_mode">tree,form</field>
    <field name="view_id" ref="view_edi_route_tree" />
    <field name="context">{'search_default_groupby_backend_id': 1}</field>
</record>
</odoo>
