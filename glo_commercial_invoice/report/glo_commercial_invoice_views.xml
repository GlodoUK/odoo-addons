<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="glo_commercial_invoice_report">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="row">
                        <div class="col-6" name="address_not_same_as_shipping">
                            <t t-set="address">
                                <address
                                    class="mb-0"
                                    t-field="o.partner_id"
                                    t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'
                                />
                                <div
                                    t-if="o.partner_id.vat"
                                    id="partner_vat_address_not_same_as_shipping"
                                >
                                    <t
                                        t-if="o.company_id.account_fiscal_country_id.vat_label"
                                        t-out="o.company_id.account_fiscal_country_id.vat_label"
                                        id="inv_tax_id_label"
                                    />
                                    <t t-else="">Tax ID</t>: <span
                                        t-field="o.partner_id.vat"
                                    />
                                </div>
                            </t>
                        </div>

                    </div>
                    <div class="mt-5 clearfix">
                        <div class="text-center mb-5">
                            <h6>The exporter of the products covered by this document declares
                                that, except where otherwise clearly indicated,
                                these products are of EU preferential origin.</h6>
                        </div>
                        <div class="page mb-4">
                            <h2>
                                <span t-if="o.name != '/'" t-field="o.name" />
                            </h2>
                            <div class="oe_structure" />
                            <div id="informations" class="row mt-3 mb-1">
                                <div
                                    t-attf-class="#{'col-auto col-3 mw-100' if report_type != 'html' else 'col'} mb-2"
                                >
                                    <strong>Date:</strong>
                                    <br />
                                    <span t-field="o.scheduled_date" />
                                </div>
                                <div
                                    t-attf-class="#{'col-auto col-3 mw-100' if report_type != 'html' else 'col'} mb-2"
                                    name="deadline_date"
                                >
                                    <strong>Deadline Date:</strong>
                                    <br />
                                    <span t-field="o.date_deadline" />
                                </div>
                            </div>

                            <div class="oe_structure" />
                            <table
                                class="table table-sm o_main_table table-borderless"
                                name="invoice_line_table"
                                t-if="o.move_line_ids and o.move_ids_without_package"
                            >
                                <thead>
                                    <tr>
                                        <th
                                            name="th_commodity_code"
                                            class="text-start"
                                        >
                                            <span>Commodity Code</span>
                                        </th>
                                        <th
                                            name="th_description"
                                            class="text-start"
                                        >
                                            <span>Description</span>
                                        </th>
                                        <th name="th_quantity" class="text-end">
                                            <span>Quantity</span>
                                        </th>
                                        <th
                                            name="th_priceunit"
                                            t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"
                                        >
                                            <span>Unit Price</span>
                                        </th>
                                        <th
                                            name="th_weight"
                                            t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"
                                        >
                                            <span>Weight</span>
                                        </th>
                                        <th
                                            name="th_com"
                                            t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"
                                        >
                                            <span>Country of Manufacture</span>
                                        </th>
                                        <th name="th_subtotal" class="text-end">
                                            <span>Amount</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="invoice_tbody">
                                    <t t-set="overall_total" t-value="0" />
                                    <t
                                        t-foreach="o.move_line_ids_without_package"
                                        t-as="line"
                                    >
                                        <t
                                            t-set="total"
                                            t-value="line.price_unit * line.quantity"
                                        />

                                        <tr
                                            t-att-class="'bg-200 fw-bold o_line_section'"
                                        >
                                            <td name="td_hs_code">
                                                <span
                                                    t-field="line.intrastat_code_id.code"
                                                />
                                            </td>
                                            <td name="td_description">
                                                <span
                                                    t-field="line.intrastat_code_id.description"
                                                    t-options="{'widget': 'text'}"
                                                />
                                            </td>
                                            <td name="td_quantity" class="text-end">
                                                <span t-field="line.quantity" />
                                                <span
                                                    t-field="line.product_uom_id"
                                                />
                                            </td>
                                            <td name="td_price_unit">
                                                <span
                                                    class="text-nowrap"
                                                    t-field="line.price_unit"
                                                />
                                            </td>
                                            <td name="td_weight">
                                                <span
                                                    class="text-nowrap"
                                                    t-field="line.weight"
                                                />
                                            </td>
                                            <td name="td_com">
                                                <span
                                                    t-field="line.intrastat_country_id"
                                                />
                                            </td>
                                            <td
                                                name="td_amount"
                                                class="text-end o_price_total"
                                            >
                                                <span
                                                    class="text-nowrap"
                                                    t-out="total"
                                                />
                                            </td>
                                            <t
                                                t-set="overall_total"
                                                t-value="overall_total + total"
                                            />
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                            <div>
                                <div
                                    id="right-elements"
                                    t-attf-class="col-5 col-md-5 ms-5 d-inline-block float-end"
                                >
                                    <div id="total" class="clearfix row">
                                        <div class="ms-auto">
                                            <table
                                                class="table table-sm table-borderless avoid-page-break-inside"
                                            >
                                                <tr class="border-black fw-bold">
                                                    <td>Total Amount</td>
                                                    <td class="text-end">
                                                        <span
                                                            t-out="overall_total"
                                                        />
                                                    </td>
                                                </tr>
                                                <tr class="border-black fw-bold">
                                                    <td>Total Weight</td>
                                                    <td class="text-end">
                                                        <span t-field="o.weight" />
                                                    </td>
                                                </tr>
                                                <tr
                                                    class="border-black fw-bold"
                                                    t-if="o.carrier_id"
                                                >
                                                    <td>Shipping</td>
                                                    <td class="text-end">
                                                        <span
                                                            t-field="o.carrier_id.name"
                                                        />
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <p>The exporter of the products covered by this document (Exporter Reference
                            No <span
                                t-field="o.partner_id.vat"
                            /> ) declares that, except where otherwise
                            clearly indicated, these products are of UK preferential origin.</p>
                        <p> I declare that the products covered by this document are not subject
                            to any export or import prohibitions &amp; restrictions.</p>
                    </div>
                    <div class="mt-5 text-start">
                        <p>Signature: ___________________________</p>
                        <p>Name: _______________________________</p>
                        <p>Date: _______________________________</p>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
